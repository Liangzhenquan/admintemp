{"version":3,"sources":["api/handleError.js","api/config.js","api/index.js","containers/MyMenu.jsx","containers/MyAside.jsx","containers/MyHeader.jsx","containers/MyLayout.jsx","containers/index.js","utils/message.js"],"names":["handleError","res","url","status","window","location","href","message","error","setTimeout","originFetch","fetch","Object","defineProperty","configurable","enumerable","get","options","headers","Accept","authorization","localStorage","getItem","then","a","ok","json","catch","e","post","data","p","method","body","JSON","stringify","Promise","race","resolve","reject","Error","SubMenu","renderMenuItem","menu","Item","key","to","type","icon","title","MyMenu","menus","useState","selectedKeys","setSelectedKeys","setOpenKeys","useEffect","pathname","theme","mode","map","i","sub","renderSub","Sider","Logo","styled","div","LogoIcon","MyAside","rel","target","Header","HeaderWrap","MesLink","Right","AvatarWrap","MyHeader","link","ItemGroup","Divider","onClick","clear","dot","offset","overlay","overlayStyle","width","size","style","cursor","Content","Card","MyLayout","hasPermission","this","props","routes","Component","Layout","config","top","duration","maxCount"],"mappings":"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","file":"static/js/8.e50f5a62.chunk.js","sourcesContent":["import message from '@/utils/message';\r\nconst handleError = (res, url) => {\r\n  switch (res.status) {\r\n    case 403:\r\n      if (url === 'check') {\r\n        window.location.href = '#/login';\r\n      } else {\r\n        message.error('权限过期，两秒后跳转登录页', 2);\r\n        setTimeout(() => {\r\n          window.location.href = '#/login';\r\n        }, 2000);\r\n      }\r\n      break;\r\n    case 404:\r\n      message.error('请求路径找不着');\r\n      break;\r\n    default:\r\n      message.error('系统繁忙');\r\n  }\r\n};\r\nexport default handleError;\r\n","import 'whatwg-fetch';\r\nimport handleError from './handleError';\r\nimport message from '@/utils/message';\r\n\r\n// 超时设置\r\nconst RESPONSE_TIME = 1000;\r\nconst baseURL = 'http://localhost:7000/';\r\nconst timeoutPromise = () => {\r\n  return new Promise((resolve, reject) => {\r\n    setTimeout(() => {\r\n      reject(new Error('request timeout'));\r\n    }, RESPONSE_TIME);\r\n  });\r\n};\r\nconst originFetch = fetch;\r\nObject.defineProperty(window, 'fetch', {\r\n  configurable: true, // 总开关，一旦为 false，就不能再设置他的（value，writable，configurable）\r\n  enumerable: true, // 是否能在 for...in 循环中遍历出来或在 Object.keys 中列举出来。\r\n  get() {\r\n    return (url, options) => {\r\n      return originFetch(`${baseURL}${url}`, {\r\n        ...options,\r\n        ...{\r\n          headers: {\r\n            'Content-Type': 'application/json;charset=UTF-8',\r\n            Accept: 'application/json',\r\n            authorization: localStorage.getItem('token'),\r\n            ...options.headers\r\n            // 这里统一加token 实现请求拦截\r\n          }\r\n        }\r\n      })\r\n        .then(async res => {\r\n          if (res.ok === true) {\r\n            handleError(res, url);\r\n          } else {\r\n            if (url === 'check') {\r\n              window.location.href = '#/login';\r\n            }\r\n          }\r\n          return res.json();\r\n        })\r\n        .then(res => {\r\n          return res;\r\n        })\r\n        .catch(e => {\r\n          if (url === 'check') {\r\n            window.location.href = '#/login';\r\n            return;\r\n          }\r\n          message.error('系统繁忙');\r\n        });\r\n    };\r\n  }\r\n});\r\n// post 请求\r\nconst post = (url, data, headers) => {\r\n  // const p = new Promise((resolve, reject) => {\r\n  //   fetch(url, {\r\n  //     method: 'POST',\r\n  //     headers,\r\n  //     body: JSON.stringify(data)\r\n  //   })\r\n  //     .then(res => {\r\n  //       resolve(res);\r\n  //     })\r\n  //     .catch(err => reject(err));\r\n  // });\r\n  const p = fetch(url, {\r\n    method: 'POST',\r\n    headers,\r\n    body: JSON.stringify(data)\r\n  });\r\n  return Promise.race([timeoutPromise(), p]);\r\n};\r\nexport default { post };\r\nexport { post };\r\n","import fetch, { post } from './config';\r\nexport default fetch;\r\nexport { post };\r\n","import React, { useEffect, useState } from 'react';\r\nimport { Menu, Icon } from 'antd';\r\nimport { Link } from 'react-router-dom';\r\nconst { SubMenu } = Menu;\r\nconst renderMenuItem = menu => {\r\n  return (\r\n    <Menu.Item key={menu.key}>\r\n      {/* <Icon type={menu.icon} /> */}\r\n      <Link to={menu.key}>\r\n        <Icon type={menu.icon} />\r\n        {menu.title}\r\n      </Link>\r\n    </Menu.Item>\r\n  );\r\n};\r\nconst renderSub = menus => {\r\n  return (\r\n    <SubMenu\r\n      key={menus.key}\r\n      title={\r\n        <span>\r\n          <Icon type={menus.icon} />\r\n          <span>{menus.title}</span>\r\n        </span>\r\n      }\r\n    >\r\n      {menus.sub.map((menu, i) => renderMenuItem(menu))}\r\n    </SubMenu>\r\n  );\r\n  // console.log('sub', menus);\r\n  // return null;\r\n};\r\nfunction MyMenu({ menus, location }) {\r\n  const [selectedKeys, setSelectedKeys] = useState(null);\r\n  const [openKeys, setOpenKeys] = useState(null);\r\n  useEffect(() => {\r\n    setSelectedKeys([location.pathname]);\r\n    setOpenKeys(['/item']);\r\n  }, [location.pathname]);\r\n  return (\r\n    <Menu\r\n      theme=\"dark\"\r\n      // openKeys={openKeys}\r\n      selectedKeys={selectedKeys}\r\n      mode=\"inline\"\r\n    >\r\n      {menus.map((menu, i) =>\r\n        menu.sub ? renderSub(menu) : renderMenuItem(menu)\r\n      )}\r\n    </Menu>\r\n  );\r\n}\r\nexport default MyMenu;\r\n","import React from 'react';\r\nimport { Layout, Icon } from 'antd';\r\nimport styled from 'styled-components';\r\nimport MyMenu from './MyMenu';\r\nconst { Sider } = Layout;\r\nconst Logo = styled.div`\r\n  text-align: center;\r\n`;\r\nconst LogoIcon = styled(Icon)`\r\n  font-size: 1rem;\r\n  color: #fff;\r\n`;\r\nfunction MyAside({ menus, location }) {\r\n  const link = 'https://github.com/Liangzhenquan';\r\n  return (\r\n    <Sider>\r\n      <Logo>\r\n        <a href={link} rel=\"noopener noreferrer\" target=\"_blank\">\r\n          <LogoIcon type=\"github\" />\r\n        </a>\r\n      </Logo>\r\n      <MyMenu menus={menus} location={location} />\r\n    </Sider>\r\n  );\r\n}\r\nexport default MyAside;\r\n","import React, { useState } from 'react';\r\nimport styled from 'styled-components';\r\nimport { Layout, Icon, Badge, Dropdown, Menu, Avatar } from 'antd';\r\nconst { Header } = Layout;\r\nconst HeaderWrap = styled(Header)`\r\n  display: flow-root;\r\n  zoom: 1;\r\n`;\r\nconst MesLink = styled.a`\r\n  color: #000;\r\n`;\r\nconst Right = styled.div`\r\n  float: right;\r\n  display: flex;\r\n  align-items: center;\r\n`;\r\nconst AvatarWrap = styled.div`\r\n  margin-left: 0.4rem;\r\n`;\r\nexport default function MyHeader() {\r\n  const [link, setLink] = useState(\r\n    'https://github.com/Liangzhenquan/admintemp.git'\r\n  );\r\n  const logOut = () => {\r\n    window.location.href = '#/login';\r\n    localStorage.clear();\r\n  };\r\n  const menu = (\r\n    <Menu>\r\n      <Menu.ItemGroup title=\"用户设置\">\r\n        <Menu.Divider />\r\n        <Menu.Item>\r\n          <Icon type=\"edit\" />\r\n          个人设置\r\n        </Menu.Item>\r\n        <Menu.Item>\r\n          <Icon theme=\"filled\" type=\"setting\" />\r\n          系统设置\r\n        </Menu.Item>\r\n      </Menu.ItemGroup>\r\n      <Menu.Divider />\r\n      <Menu.Item onClick={logOut}>\r\n        <span>\r\n          <Icon type=\"logout\" /> 退出登录\r\n        </span>\r\n      </Menu.Item>\r\n    </Menu>\r\n  );\r\n  return (\r\n    <HeaderWrap>\r\n      <Right>\r\n        <Badge dot offset={[-2, 0]}>\r\n          <MesLink href={link}>\r\n            <Icon type=\"bell\" />\r\n          </MesLink>\r\n        </Badge>\r\n        <AvatarWrap>\r\n          <Dropdown overlay={menu} overlayStyle={{ width: '150px' }}>\r\n            <Avatar icon=\"user\" size={30} style={{ cursor: 'pointer' }} />\r\n          </Dropdown>\r\n        </AvatarWrap>\r\n      </Right>\r\n    </HeaderWrap>\r\n  );\r\n}\r\n","import React, { Component } from 'react';\r\nimport { Layout } from 'antd';\r\nimport MyAside from './MyAside';\r\nimport { RouteWithSubRoutes, menus } from '@/router';\r\nimport { post } from '@/api';\r\nimport styled from 'styled-components';\r\nimport Header from './MyHeader';\r\nconst { Content } = Layout;\r\nconst Card = styled.div`\r\n  min-height: calc(100% - 0.4rem);\r\n  margin: 0.2rem;\r\n  border-radius: 2px;\r\n  background-color: #fff;\r\n`;\r\nexport default class MyLayout extends Component {\r\n  componentWillMount() {\r\n    this.hasPermission();\r\n  }\r\n  hasPermission = async () => {\r\n    post('check');\r\n  };\r\n  render() {\r\n    const { routes, location } = this.props;\r\n    return (\r\n      <Layout>\r\n        <MyAside menus={menus} location={location} />\r\n        <Layout>\r\n          <Header />\r\n          <Content>\r\n            <Card>\r\n              <RouteWithSubRoutes routes={routes} />\r\n            </Card>\r\n          </Content>\r\n        </Layout>\r\n      </Layout>\r\n    );\r\n  }\r\n}\r\n","import Layout from './MyLayout';\r\nexport default Layout;\r\n","import { message } from 'antd';\r\nmessage.config({\r\n  top: 10,\r\n  duration: 2,\r\n  maxCount: 3\r\n});\r\nexport default message;\r\n"],"sourceRoot":""}